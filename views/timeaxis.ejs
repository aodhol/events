<canvas id="timeaxis" height="80"></canvas>
<style type="text/css">
#timeaxis {
	/*width: 100%;*/
}
head, body {
	margin: 0;
	padding: 0;
}
</style>
<script type="text/javascript">
var canvas = document.getElementById('timeaxis'),
	context = canvas.getContext('2d'),
	canvasHeight = canvas.height,
	canvasWidth = window.innerWidth,
	fontHeight = 16,
	scaleKey,
	scaleValue,
	scaleIndex,
	keyWidth,
	articleTimelineKey = 'published',
	start,
	end,
	months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
	dates = [];

	canvas.width = canvasWidth;

	window.addEventListener('resize', resizeCanvas, false);

var event = {
	"end_at":"2012-09-25T14:45:00Z",
	"start_at":"2012-08-25T14:45:00Z",
	"articles":[
		{ "published":"2012-08-31T22:29:46Z" },
		{ "published":"2012-09-02T22:29:46Z" },
		{ "published":"2012-09-05T22:29:46Z" },
		{ "published":"2012-09-12T22:29:46Z" }
	]
};
renderTimeline(event);

function renderTimeline(event) {
	start = new Date(event.start_at);
	end = new Date(event.end_at);
	var datediff = end.getTime() - start.getTime(),
		seconds = datediff / 1000,
		minutes = seconds / 60,
		hours = minutes / 60,
		days = hours / 24;

	if (hours < 46) {
		
	} else if (days < 40) {
		scaleKey = 'days';
		scaleValue = days;
	}

	getSizes();

	background();
	addKey(true);
	addArticles();
}

function resizeCanvas() {
	getSizes();
	background();
	addArticles();
}

function getSizes() {
	canvasWidth = window.innerWidth;
	canvas.width = canvasWidth;
	keyWidth = canvasWidth / scaleValue;
}

function background() {
	context.fillStyle = '#ccc';
	context.fillRect(0, 0, canvas.width, canvas.height);
}

function addArticles() {
	for (article in event.articles) {
		var d = new Date(event.articles[article][articleTimelineKey]),
			articleDate = new Date(d.getFullYear(), d.getMonth(), d.getDate());

		for (index in dates) {
			if (dates[index].getTime() === articleDate.getTime()) {
				addMarker(index);
				break;
			}
		}
	}
	addKey();
}

function addMarker(point) {
	context.fillStyle = 'yellow';
	console.log(point);
	context.fillRect(point * keyWidth, 0, keyWidth, canvas.height);
}

function addKey(onLoad) {
	context.fillStyle = 'black';
	context.font = 'bold 12px Arial';
	var currentDate = new Date(start.getTime()),
		position = 0,
		currentDay,
		currentMonth,
		currentYear;

	while (currentDate <= end) {
		if (scaleKey === 'days') {
			context.fillText(currentDate.getDate(), position, canvasHeight - (fontHeight) * 2);
			if (currentMonth !== currentDate.getMonth()) {
				currentMonth = currentDate.getMonth();
				context.fillText(months[currentMonth], position, canvasHeight - fontHeight);
			}
			if (currentYear !== currentDate.getFullYear()) {
				currentYear = currentDate.getFullYear();
				context.fillText(currentYear, position, canvasHeight - 2);
			}
		}
		position += keyWidth;
		if (onLoad) {
			dates.push(new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate()));
		}
		currentDate.setDate(currentDate.getDate() + 1);
	}
	
}
</script>